webpackJsonp([6],{"5kY6":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ClaimListItem",props:["claim","selectedClaims"],data:function(){return{isSelected:!1}},computed:{selected:function(){return console.log(this.selectedClaims.indexOf(this.claim)),this.selectedClaims.indexOf(this.claim)<0?this.isSelected=!1:this.isSelected=!0}},methods:{selectToggle:function(t){return this.isSelected=!this.isSelected,1==this.isSelected?this.$emit("claim-selected",t):this.$emit("claim-removed",t)}}}},9:function(t,e,s){t.exports=s("PrmG")},I0Iu:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"AdjusterListItem",props:["adjuster"],data:function(){return{isSelected:!1}},methods:{selectToggle:function(t){return this.isSelected=!this.isSelected,1==this.isSelected?this.$emit("adjuster-selected",t):this.$emit("adjuster-removed",t)},totalXp:function(t){var e=0;return t.work_history&&Object.values(t.work_history).filter(function(t){"number"==typeof t&&(e+=t)}),t.xp=e,t.xp}}}},NHM3:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card is-dispatch-claim",class:{"is-active":t.isSelected},staticStyle:{"margin-bottom":"1em"},on:{click:function(e){t.selectToggle(t.claim)}}},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-1 is-icon"},[t.isSelected?s("span",{staticClass:"icon is-large",staticStyle:{"padding-right":"1em"}},[s("i",{staticClass:"fa fa-lg",class:[{"has-text-danger":t.isSelected},{"fa-check":t.isSelected}]})]):t._e(),t._v(" "),t.isSelected?t._e():s("span",{staticClass:"icon is-large",staticStyle:{"padding-right":"1em"}},[s("i",{staticClass:"fa fa-lg",class:[{"has-text-dark":!t.isSelected},{"fa-map-marker":!t.isSelected}]})])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"subtitle"},[s("span",{staticStyle:{"font-weight":"700"}},[t._v(t._s(t.claim.carrier.name))]),t._v(" Claim #")]),t._v(" "),s("h3",{staticClass:"title"},[s("a",{attrs:{href:"/claims/"+t.claim.id},domProps:{textContent:t._s(t.claim.claim_number)}})])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"subtitle"},[t._v("Type Of Loss")]),t._v(" "),s("h3",{staticClass:"title is-grey-lighter"},[s("a",{domProps:{textContent:t._s(t.claim.type_of_loss)}})])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"subtitle"},[t._v("Date Received")]),t._v(" "),s("h3",{staticClass:"title is-grey-lighter"},[s("a",{domProps:{textContent:t._s(t.claim.date_received)}})])])])])])},staticRenderFns:[]}},PrmG:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("I3G/"),a=s.n(i),l=s("gUnR"),r=s.n(l);new a.a({el:"#dashboard",components:{dashboard:r.a}})},RchE:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card is-dispatch-adjuster",class:{"is-active":t.isSelected},staticStyle:{"margin-bottom":"1em"},on:{click:function(e){t.selectToggle(t.adjuster)}}},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2 is-icon"},[s("a",{attrs:{href:"/users/"+t.adjuster.id}},[t.adjuster.avatar?s("img",{staticStyle:{"border-radius":"512px",border:"3px solid #343b4d","margin-top":".5rem"},attrs:{src:t.adjuster.avatar.path,alt:t.adjuster.name,width:"50%",height:"auto"}}):s("span",{staticClass:"icon is-large",staticStyle:{"padding-right":"1em"}},[s("i",{staticClass:"fa fa-user-circle-o fa-2x has-text-dark"})])])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"subtitle"},[t._v("Adjuster")]),t._v(" "),s("h3",{staticClass:"title"},[s("a",{domProps:{textContent:t._s(t.adjuster.name)}})])]),t._v(" "),s("div",{staticClass:"column is-3 has-text-centered"},[s("h4",{staticClass:"subtitle"},[t._v("XP")]),t._v(" "),s("h3",{staticClass:"title is-grey-lighter"},[s("a",{domProps:{textContent:t._s(t.totalXp(t.adjuster))}})])]),t._v(" "),t.adjuster.distance.text?s("div",{staticClass:"column"},[s("h4",{staticClass:"subtitle"},[t._v("Distance")]),t._v(" "),s("h3",{staticClass:"title is-grey-lighter"},[s("a",{domProps:{textContent:t._s(t.adjuster.distance.text)}})])]):t._e()])])])},staticRenderFns:[]}},S5f9:function(t,e,s){var i=s("VU/8")(s("5kY6"),s("NHM3"),!1,null,null,null);t.exports=i.exports},"VU/8":function(t,e){t.exports=function(t,e,s,i,a,l){var r,n=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(r=t,n=t.default);var o,d="function"==typeof n?n.options:n;if(e&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0),s&&(d.functional=!0),a&&(d._scopeId=a),l?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},d._ssrRegister=o):i&&(o=i),o){var u=d.functional,m=u?d.render:d.beforeCreate;u?(d._injectStyles=o,d.render=function(t,e){return o.call(e),m(t,e)}):d.beforeCreate=m?[].concat(m,o):[o]}return{esModule:r,exports:n,options:d}}},gU4B:function(t,e,s){var i=s("VU/8")(s("I0Iu"),s("RchE"),!1,null,null,null);t.exports=i.exports},gUnR:function(t,e,s){var i=s("VU/8")(s("i+NM"),s("gruF"),!1,null,null,null);t.exports=i.exports},gruF:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("div",{staticStyle:{width:"100%",height:"600px",position:"fixed"},attrs:{id:"map"}}),t._v(" "),s("div",{staticClass:"columns section is-main"},[s("div",{staticClass:"column is-2"},[s("h1",{staticClass:"title",staticStyle:{"font-weight":"700"}},[t._v("Options")]),t._v(" "),t._m(0),t._v(" "),s("hr",{staticStyle:{background:"#ccc"}}),t._v(" "),s("nav",{staticClass:"panel"},[s("div",{staticClass:"panel-block"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"input",attrs:{type:"text",placeholder:"search"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),s("a",{staticClass:"panel-block",on:{click:t.clearAllMarkers}},[t._v("Clear All Markers")]),t._v(" "),s("a",{staticClass:"panel-block",on:{click:t.addAdjusters}},[t._v("Add Adjusters to Map")]),t._v(" "),s("a",{staticClass:"panel-block",on:{click:t.addClaims}},[t._v("Add Claims to Map")]),t._v(" "),t._m(1),t._v(" "),t._m(2)])]),t._v(" "),s("div",{staticClass:"column"},[s("h1",{staticClass:"title",staticStyle:{"font-weight":"700"}},[t._v("Assign Queue")]),t._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.hideUnselectedClaims,expression:"hideUnselectedClaims"}],staticClass:"switch is-rounded is-small",attrs:{id:"hideUnselectedClaim",type:"checkbox",name:"hideUnselectedClaim"},domProps:{checked:Array.isArray(t.hideUnselectedClaims)?t._i(t.hideUnselectedClaims,null)>-1:t.hideUnselectedClaims},on:{change:function(e){var s=t.hideUnselectedClaims,i=e.target,a=!!i.checked;if(Array.isArray(s)){var l=t._i(s,null);i.checked?l<0&&(t.hideUnselectedClaims=s.concat([null])):l>-1&&(t.hideUnselectedClaims=s.slice(0,l).concat(s.slice(l+1)))}else t.hideUnselectedClaims=a}}}),t._v(" "),s("label",{attrs:{for:"hideUnselectedClaim"}},[t._v("Hide Unselected")])])])]),t._v(" "),s("hr",{staticStyle:{background:"#ccc"}}),t._v(" "),t._l(t.claims,function(e){return s("claim-list-item",{key:e.id,attrs:{claim:e,"selected-claims":t.selectedClaims},on:{"claim-selected":t.selectClaimToggle,"claim-removed":t.selectClaimToggle}})}),t._v(" "),t._m(3)],2),t._v(" "),t.selectedClaims.length?s("div",{staticClass:"column is-one-third"},[s("h1",{staticClass:"title",staticStyle:{"font-weight":"700"}},[t._v("Adjusters")]),t._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.addFilteredAdjustersToMap,expression:"addFilteredAdjustersToMap"}],staticClass:"switch is-rounded is-small",attrs:{id:"addFilteredAdjusters",type:"checkbox",name:"addFilteredAdjusters"},domProps:{checked:Array.isArray(t.addFilteredAdjustersToMap)?t._i(t.addFilteredAdjustersToMap,null)>-1:t.addFilteredAdjustersToMap},on:{change:[function(e){var s=t.addFilteredAdjustersToMap,i=e.target,a=!!i.checked;if(Array.isArray(s)){var l=t._i(s,null);i.checked?l<0&&(t.addFilteredAdjustersToMap=s.concat([null])):l>-1&&(t.addFilteredAdjustersToMap=s.slice(0,l).concat(s.slice(l+1)))}else t.addFilteredAdjustersToMap=a},t.toggleFilteredAdjusters]}}),t._v(" "),s("label",{attrs:{for:"addFilteredAdjusters"}},[t._v("Add All")])])]),t._v(" "),s("div",{staticClass:"column"},[s("div",{staticClass:"field"},[s("input",{staticClass:"switch is-rounded is-small",attrs:{id:"getDistanceFromClaim",type:"checkbox",name:"getDistanceFromClaim"},on:{change:function(e){t.getDistances()}}}),t._v(" "),s("label",{attrs:{for:"getDistanceFromClaim"}},[t._v("Get Distance")])])])]),t._v(" "),s("hr",{staticStyle:{background:"#ccc"}}),t._v(" "),t._l(t.orderedAdjusters,function(e){return s("adjuster-list-item",{key:e.id,attrs:{adjuster:e},on:{"adjuster-selected":t.selectAdjusterToggle,"adjuster-removed":t.selectAdjusterToggle}})})],2):t._e(),t._v(" "),t.actionable?s("div",{staticClass:"column is-2"},[s("h1",{staticClass:"title",staticStyle:{"font-weight":"700"}},[t._v("Info")]),t._v(" "),t._m(4),t._v(" "),s("hr",{staticStyle:{background:"#ccc"}}),t._v(" "),s("h3",{staticClass:"title"},[t._v("Work History")]),t._v(" "),s("p",[t._v(t._s(t.workHistory))]),t._v(" "),t._m(5)]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("div",{staticClass:"field"},[e("input",{staticClass:"switch is-rounded is-small",attrs:{id:"hide",type:"checkbox",name:"hide"}}),this._v(" "),e("label",{attrs:{for:"hide"}},[this._v("Hide")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"panel-block"},[e("input",{attrs:{type:"checkbox"}}),this._v("\n\t\t\t    Toggle\n\t\t\t  ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"panel-block"},[e("button",{staticClass:"button is-link is-outlined is-fullwidth"},[this._v("\n\t\t\t      reset all filters\n\t\t\t    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"pagination",attrs:{role:"navigation","aria-label":"pagination"}},[e("a",{staticClass:"pagination-previous"},[this._v("Previous")]),this._v(" "),e("a",{staticClass:"pagination-next"},[this._v("Next page")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("div",{staticClass:"field"},[e("input",{staticClass:"switch is-rounded is-small",attrs:{id:"hideHistory",type:"checkbox",name:"hideHistory"}}),this._v(" "),e("label",{attrs:{for:"hideHistory"}},[this._v("Hide HIsstory")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card is-dispatch-action"},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-2 is-icon"},[e("span",{staticClass:"icon is-large",staticStyle:{"padding-right":"1em"}},[e("i",{staticClass:"fa fa-paper-plane-o fa-lg has-text-dark"})])]),this._v(" "),e("div",{staticClass:"column"},[e("h3",{staticClass:"title"},[this._v("Send Work Assignment")])])])])])}]}},"i+NM":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("S5f9"),a=s.n(i),l=s("gU4B"),r=s.n(l);e.default={name:"DispatchDashboard",components:{claimListItem:a.a,adjusterListItem:r.a},created:function(){return this.claims.forEach(function(t){t.claim_data=JSON.parse(t.claim_data)})},mounted:function(){this.bounds=new google.maps.LatLngBounds,this.map=new google.maps.Map(document.getElementById("map"),{zoom:7,center:this.home})},data:function(){return{distances:[],destinationUri:"https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=",hideUnselectedClaims:!1,addFilteredAdjustersToMap:!1,search:"",allSelected:!1,selectedClaims:[],selectedAdjusters:[],claims:dispatch.claims,adjusters:dispatch.adjusters,autocomplete:{},bounds:{},map:{},claimMarkers:[],adjusterMarkers:[],home:{lat:30.2702208,lng:-97.7453625},city:"",state:"",street:"",number:0}},computed:{origin:function(){if(this.selectedClaims.length){var t=this.selectedClaims[0].claim_data.client.addresses[1];return new google.maps.LatLng(t.latitude,t.longitude)}return"No Origin"},destinations:function(){var t=[],e=!0,s=!1,i=void 0;try{for(var a,l=this.filteredAdjusters[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var r=a.value;if("number"==typeof r.profile.lat&&"number"==typeof r.profile.lng){var n=new google.maps.LatLng(r.profile.lat,r.profile.lng);t.push(n)}}}catch(t){s=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(s)throw i}}return t},workHistory:function(){var t="";if(this.selectedAdjusters.length){var e=this.selectedAdjusters[0].work_history;for(var s in console.log(e),e)"number"==typeof e[s]&&e[s]&&"id"!=s&&"user_id"!=s&&(t+=s+": "+e[s]+", ")}return t},orderedAdjusters:function(){return window._.orderBy(this.filteredAdjusters,["distance.value","xp"],["asc","desc"])},filteredAdjusters:function(){var t=this,e=[];return t.adjusters.filter(function(s){if(e.length<=24){var i=!0,a=!1,l=void 0;try{for(var r,n=s.adjuster_licenses[Symbol.iterator]();!(i=(r=n.next()).done);i=!0){r.value.license_state===t.selectedClaims[0].claim_data.client.addresses[1].state&&e.push(s)}}catch(t){a=!0,l=t}finally{try{!i&&n.return&&n.return()}finally{if(a)throw l}}}}),e},actionable:function(){return!(!this.selectedClaims.length||!this.selectedAdjusters.length)}},methods:{saveLocations:function(){window.axios.post("/api/users/locations",{adjusters:this.adjusters}).then(function(t){return console.log(t)}).catch(function(t){return t})},getDistances:function(){return(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[this.origin],destinations:this.destinations,travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.IMPERIAL},this.filterDistances)},filterDistances:function(t,e){var s=this;return console.log(e),s.filteredAdjusters.forEach(function(e){var i=s.filteredAdjusters.indexOf(e);console.log(t),t.rows[0].elements[i]&&(e.distance={text:"",value:0},e.distance.text=t.rows[0].elements[i].distance.text,e.distance.value=t.rows[0].elements[i].distance.value)})},addAdjusters:function(){var t=!0,e=!1,s=void 0;try{for(var i,a=this.adjusters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value;this.addMarker("adjuster",l)}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}},toggleFilteredAdjusters:function(){if(this.addFilteredAdjustersToMap){var t=!0,e=!1,s=void 0;try{for(var i,a=this.filteredAdjusters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value;this.addMarker("adjuster",l)}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}}else this.adjusterMarkers=[]},addClaims:function(){var t=!0,e=!1,s=void 0;try{for(var i,a=this.claims[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value;this.addMarker("claim",l)}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}},addMarker:function(t,e){if("claim"==t){var s={lat:+e.claim_data.client.addresses[1].latitude,lng:+e.claim_data.client.addresses[1].longitude},i=new google.maps.Marker({position:s,map:this.map}),a=new google.maps.InfoWindow({content:"\n\t\t\t          \t<h1>"+e.claim_number+"</h1>\n\t\t\t          \t<h3>"+e.insured+" &nbsp;|&nbsp; "+e.type_of_loss+" &nbsp;|&nbsp; "+e.date_received+"</h3>\n\t\t\t\t\t\t<p>"+e.description+"</p>\n\t\t\t          "});i.addListener("click",function(){a.open(map,i)}),this.claimMarkers.push(i),this.map.panTo(i.position)}if("adjuster"==t){var l=new google.maps.Marker({position:{lat:+e.profile.lat,lng:+e.profile.lng},icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",title:e.name,map:this.map}),r=new google.maps.InfoWindow({content:"\n\t\t\t          \t<h1>"+e.name+"</h1>\n\t\t\t          "});l.addListener("click",function(){r.open(map,l)}),this.adjusterMarkers.push(l),this.map.panTo(l.position)}},clearAdjusterMarker:function(t){return t.setMap(null),this.adjusterMarkers.splice(this.adjusterMarkers.indexOf(t),1)},clearClaimMarker:function(t){return t.setMap(null),this.claimMarkers.splice(this.claimMarkers.indexOf(t),1)},clearAllMarkers:function(){var t=!0,e=!1,s=void 0;try{for(var i,a=this.claimMarkers[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.setMap(null)}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}var l=!0,r=!1,n=void 0;try{for(var c,o=this.adjusterMarkers[Symbol.iterator]();!(l=(c=o.next()).done);l=!0){c.value.setMap(null)}}catch(t){r=!0,n=t}finally{try{!l&&o.return&&o.return()}finally{if(r)throw n}}this.claimMarkers,this.adjusterMarkers=[]},selectClaimToggle:function(t){var e=this.selectedClaims.indexOf(t);if(!(e<0))return t.isSelected=!1,this.clearClaimMarker(this.claimMarkers[e]),this.selectedClaims.splice(e,1);t.isSelected=!0,this.selectedClaims.push(t),this.addMarker("claim",t)},selectAdjusterToggle:function(t){var e=this.selectedAdjusters.indexOf(t);if(!(e<0))return t.isSelected=!1,this.clearAdjusterMarker(this.adjusterMarkers[e]),this.selectedAdjusters.splice(e,1);t.isSelected=!0,this.selectedAdjusters.push(t),this.addMarker("adjuster",t)},setHome:function(){var t=this.autocomplete.getPlace();this.home={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},this.marker.setPosition(this.home),this.map.fitBounds(this.bounds.extend(this.home)),this.map.setCenter(this.home),this.map.setZoom(12)},turnOffAxiosHeaders:function(){delete window.axios.defaults.headers.common["X-Requested-With"],delete window.axios.defaults.headers.common.Authorization,delete window.axios.defaults.headers.common["X-CSRF-TOKEN"]}}}}},[9]);